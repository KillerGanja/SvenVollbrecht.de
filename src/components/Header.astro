---
import LanguageSwitcher from "./LanguageSwitcher.astro";

const { lang } = Astro.params;
const currentLang = lang || "de";

const baseLinks = [
    { href: "/works", label: "Arbeiten", enLabel: "Works" },
    { href: "/exhibitions", label: "Ausstellungen", enLabel: "Exhibitions" },
    { href: "/press", label: "Presse", enLabel: "Press" },
    { href: "/about", label: "Ãœber", enLabel: "About" },
    { href: "/contact", label: "Kontakt", enLabel: "Contact" },
];

const links = baseLinks.map((link) => {
    const localizedHref = currentLang === "en" ? `/en${link.href}` : link.href;
    const localizedLabel = currentLang === "en" ? link.enLabel : link.label;
    return { href: localizedHref, label: localizedLabel };
});

const homeHref = currentLang === "en" ? "/en" : "/";
---

<header
    class="sticky top-0 z-50 h-16 border-b border-gray-100 bg-white/90 backdrop-blur-md"
>
    <div
        class="mx-auto flex h-full max-w-screen-2xl items-center justify-between px-4 sm:px-8 lg:px-16"
    >
        <!-- Logo -->
        <a
            href={homeHref}
            class="text-xl font-bold tracking-tight text-gray-900"
        >
            Sven Vollbrecht
        </a>

        <!-- Desktop Navigation & Switcher -->
        <div class="hidden md:flex items-center gap-12">
            <nav class="flex items-center gap-8">
                {
                    links.map((link) => (
                        <a
                            href={link.href}
                            class="text-sm font-medium text-gray-600 transition-colors hover:text-gray-900"
                        >
                            {link.label}
                        </a>
                    ))
                }
            </nav>
            <LanguageSwitcher />
        </div>

        <!-- Mobile Menu Button & Switcher -->
        <div class="flex items-center gap-4 md:hidden">
            <LanguageSwitcher />
            <button
                id="menu-toggle"
                class="flex h-10 w-10 items-center justify-center rounded-md p-2 text-gray-600 hover:bg-gray-100"
                aria-label="Toggle menu"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="h-6 w-6"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Mobile Dropdown -->
    <div
        id="mobile-menu"
        class="hidden border-b border-gray-100 bg-white px-4 py-4 md:hidden"
    >
        <nav class="flex flex-col gap-4">
            {
                links.map((link) => (
                    <a
                        href={link.href}
                        class="text-sm font-medium text-gray-600 transition-colors hover:text-gray-900"
                    >
                        {link.label}
                    </a>
                ))
            }
        </nav>
    </div>
</header>

<script>
    const menuToggle = document.getElementById("menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");

    if (menuToggle && mobileMenu) {
        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });
    }
</script>
