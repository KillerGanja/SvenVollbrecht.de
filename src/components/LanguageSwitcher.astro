---
const { lang } = Astro.params;
const currentLang = lang || "de";
const pathname = Astro.url.pathname;

// Generate target URL
let targetUrl;
if (currentLang === "de") {
    // Current is de, target is en
    // If we are at /de, go to /en
    if (pathname === "/" || pathname === "/de") {
        targetUrl = "/en";
    } else {
        targetUrl = pathname.replace(/^\/de/, "/en");
        if (!targetUrl.startsWith("/en")) {
            targetUrl = `/en${targetUrl}`;
        }
    }
} else {
    // Current is en, target is de
    if (pathname === "/en") {
        targetUrl = "/de";
    } else {
        targetUrl = pathname.replace(/^\/en/, "/de");
    }
}
---

<div
    class="flex items-center gap-2 text-xs font-light tracking-widest uppercase"
>
    <a
        href={currentLang === "de" ? "#" : targetUrl}
        class={`transition-colors hover:text-gray-900 ${currentLang === "de" ? "text-gray-900 font-medium" : "text-gray-400"}`}
        aria-current={currentLang === "de" ? "page" : undefined}
    >
        de
    </a>
    <span class="text-gray-200">/</span>
    <a
        href={currentLang === "en" ? "#" : targetUrl}
        class={`transition-colors hover:text-gray-900 ${currentLang === "en" ? "text-gray-900 font-medium" : "text-gray-400"}`}
        aria-current={currentLang === "en" ? "page" : undefined}
    >
        en
    </a>
</div>

<style>
    a {
        text-decoration: none;
    }
</style>
