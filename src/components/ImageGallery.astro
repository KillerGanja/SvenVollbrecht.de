---
const { images, title } = Astro.props;
---

<link rel="stylesheet" href="https://unpkg.com/photoswipe@5/dist/photoswipe.css" />

<div class="gallery" id="work-gallery">
  {images.map((src) => (
    <a
      href={src}
      data-pswp-width="1600"
      data-pswp-height="1200"
    >
      <img src={src} alt={title} loading="lazy" />
    </a>
  ))}
</div>

<script type="module">
  import PhotoSwipeLightbox from 'https://unpkg.com/photoswipe@5/dist/photoswipe-lightbox.esm.js';
  import PhotoSwipe from 'https://unpkg.com/photoswipe@5/dist/photoswipe.esm.js';

  const lightbox = new PhotoSwipeLightbox({
    gallery: '#work-gallery',
    children: 'a',
    pswpModule: PhotoSwipe
  });
  lightbox.init();
</script>

<style>
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .gallery img {
    width: 100%;
    height: auto;
    object-fit: cover;
    border-radius: 6px;
    cursor: zoom-in;
    transition: opacity 0.2s ease;
  }

  .gallery img:hover {
    opacity: 0.85;
  }
</style>
