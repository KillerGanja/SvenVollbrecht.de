---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ImageGallery from "../../components/ImageGallery.astro";

// 1) Astro anweisen, welche Seiten erzeugt werden sollen
export async function getStaticPaths() {
  const entries = await Astro.glob("../../../content/works/de/*.md");

  return entries.map((entry) => {
    return {
      params: { slug: entry.frontmatter.slug },
      props: { entry },
    };
  });
}

// 2) Props entgegennehmen (das einzelne Werk)
const { entry } = Astro.props;
const { frontmatter, Content } = entry;
---

<BaseLayout title={frontmatter.title}>
  <h1>{frontmatter.title}</h1>

  <p><strong>Jahr:</strong> {frontmatter.year}</p>
  <p><strong>Material:</strong> {frontmatter.materials}</p>
  <p><strong>Ma√üe:</strong> {frontmatter.dimensions}</p>

  {
    (frontmatter.gallery_images || frontmatter.images) &&
      (frontmatter.gallery_images || frontmatter.images).length > 0 && (
        <ImageGallery
          images={frontmatter.gallery_images || frontmatter.images}
          title={frontmatter.title}
        />
      )
  }

  <Content />
</BaseLayout>
